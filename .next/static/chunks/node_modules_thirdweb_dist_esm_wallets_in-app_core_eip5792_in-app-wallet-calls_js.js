"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_thirdweb_dist_esm_wallets_in-app_core_eip5792_in-app-wallet-calls_js"],{

/***/ "./node_modules/thirdweb/dist/esm/wallets/in-app/core/eip5792/in-app-wallet-calls.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/thirdweb/dist/esm/wallets/in-app/core/eip5792/in-app-wallet-calls.js ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   inAppWalletGetCallsStatus: function() { return /* binding */ inAppWalletGetCallsStatus; },\n/* harmony export */   inAppWalletSendCalls: function() { return /* binding */ inAppWalletSendCalls; }\n/* harmony export */ });\n/* harmony import */ var _rpc_actions_eth_getTransactionReceipt_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../rpc/actions/eth_getTransactionReceipt.js */ \"./node_modules/thirdweb/dist/esm/rpc/actions/eth_getTransactionReceipt.js\");\n/* harmony import */ var _rpc_rpc_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../rpc/rpc.js */ \"./node_modules/thirdweb/dist/esm/rpc/rpc.js\");\n/* harmony import */ var _transaction_actions_send_and_confirm_transaction_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../transaction/actions/send-and-confirm-transaction.js */ \"./node_modules/thirdweb/dist/esm/transaction/actions/send-and-confirm-transaction.js\");\n/* harmony import */ var _transaction_actions_send_batch_transaction_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../transaction/actions/send-batch-transaction.js */ \"./node_modules/thirdweb/dist/esm/transaction/actions/send-batch-transaction.js\");\n/* harmony import */ var _utils_caching_lru_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../utils/caching/lru.js */ \"./node_modules/thirdweb/dist/esm/utils/caching/lru.js\");\n/* harmony import */ var _utils_random_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/random.js */ \"./node_modules/thirdweb/dist/esm/utils/random.js\");\n\n\n\n\n\n\nconst bundlesToTransactions = new _utils_caching_lru_js__WEBPACK_IMPORTED_MODULE_0__.LruMap(1000);\n/**\n * @internal\n */\nasync function inAppWalletSendCalls(args) {\n    const { account, calls } = args;\n    const hashes = [];\n    const id = (0,_utils_random_js__WEBPACK_IMPORTED_MODULE_1__.randomBytesHex)(65);\n    bundlesToTransactions.set(id, hashes);\n    if (account.sendBatchTransaction) {\n        const receipt = await (0,_transaction_actions_send_batch_transaction_js__WEBPACK_IMPORTED_MODULE_2__.sendBatchTransaction)({\n            account,\n            transactions: calls,\n        });\n        hashes.push(receipt.transactionHash);\n        bundlesToTransactions.set(id, hashes);\n    }\n    else {\n        for (const tx of calls) {\n            const receipt = await (0,_transaction_actions_send_and_confirm_transaction_js__WEBPACK_IMPORTED_MODULE_3__.sendAndConfirmTransaction)({\n                account,\n                transaction: tx,\n            });\n            hashes.push(receipt.transactionHash);\n            bundlesToTransactions.set(id, hashes);\n        }\n    }\n    return id;\n}\n/**\n * @internal\n */\nasync function inAppWalletGetCallsStatus(args) {\n    const { chain, client, id } = args;\n    const bundle = bundlesToTransactions.get(id);\n    if (!bundle) {\n        throw new Error(\"Failed to get calls status, unknown bundle id\");\n    }\n    const request = (0,_rpc_rpc_js__WEBPACK_IMPORTED_MODULE_4__.getRpcClient)({ chain, client });\n    let status = \"success\";\n    const receipts = await Promise.all(bundle.map((hash) => (0,_rpc_actions_eth_getTransactionReceipt_js__WEBPACK_IMPORTED_MODULE_5__.eth_getTransactionReceipt)(request, { hash })\n        .then((receipt) => ({\n        blockHash: receipt.blockHash,\n        blockNumber: receipt.blockNumber,\n        gasUsed: receipt.gasUsed,\n        logs: receipt.logs.map((l) => ({\n            address: l.address,\n            data: l.data,\n            topics: l.topics,\n        })),\n        status: receipt.status,\n        transactionHash: receipt.transactionHash,\n    }))\n        .catch(() => {\n        status = \"pending\";\n        return null; // Return null if there's an error to filter out later\n    })));\n    return {\n        atomic: false,\n        chainId: chain.id,\n        id,\n        receipts: receipts.filter((r) => r !== null),\n        status,\n        statusCode: 200,\n        version: \"2.0.0\",\n    };\n}\n//# sourceMappingURL=in-app-wallet-calls.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGhpcmR3ZWIvZGlzdC9lc20vd2FsbGV0cy9pbi1hcHAvY29yZS9laXA1NzkyL2luLWFwcC13YWxsZXQtY2FsbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBaUc7QUFDM0M7QUFDc0Q7QUFDWDtBQUN2QztBQUNHO0FBQzdELGtDQUFrQyx5REFBTTtBQUN4QztBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0EsZUFBZSxnRUFBYztBQUM3QjtBQUNBO0FBQ0EsOEJBQThCLG9HQUFvQjtBQUNsRDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsK0dBQXlCO0FBQzNEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5REFBWSxHQUFHLGVBQWU7QUFDbEQ7QUFDQSw0REFBNEQsb0dBQXlCLFlBQVksTUFBTTtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvdGhpcmR3ZWIvZGlzdC9lc20vd2FsbGV0cy9pbi1hcHAvY29yZS9laXA1NzkyL2luLWFwcC13YWxsZXQtY2FsbHMuanM/ODcxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBldGhfZ2V0VHJhbnNhY3Rpb25SZWNlaXB0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3JwYy9hY3Rpb25zL2V0aF9nZXRUcmFuc2FjdGlvblJlY2VpcHQuanNcIjtcbmltcG9ydCB7IGdldFJwY0NsaWVudCB9IGZyb20gXCIuLi8uLi8uLi8uLi9ycGMvcnBjLmpzXCI7XG5pbXBvcnQgeyBzZW5kQW5kQ29uZmlybVRyYW5zYWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3RyYW5zYWN0aW9uL2FjdGlvbnMvc2VuZC1hbmQtY29uZmlybS10cmFuc2FjdGlvbi5qc1wiO1xuaW1wb3J0IHsgc2VuZEJhdGNoVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi4vLi4vLi4vLi4vdHJhbnNhY3Rpb24vYWN0aW9ucy9zZW5kLWJhdGNoLXRyYW5zYWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBMcnVNYXAgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbHMvY2FjaGluZy9scnUuanNcIjtcbmltcG9ydCB7IHJhbmRvbUJ5dGVzSGV4IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3V0aWxzL3JhbmRvbS5qc1wiO1xuY29uc3QgYnVuZGxlc1RvVHJhbnNhY3Rpb25zID0gbmV3IExydU1hcCgxMDAwKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbkFwcFdhbGxldFNlbmRDYWxscyhhcmdzKSB7XG4gICAgY29uc3QgeyBhY2NvdW50LCBjYWxscyB9ID0gYXJncztcbiAgICBjb25zdCBoYXNoZXMgPSBbXTtcbiAgICBjb25zdCBpZCA9IHJhbmRvbUJ5dGVzSGV4KDY1KTtcbiAgICBidW5kbGVzVG9UcmFuc2FjdGlvbnMuc2V0KGlkLCBoYXNoZXMpO1xuICAgIGlmIChhY2NvdW50LnNlbmRCYXRjaFRyYW5zYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJlY2VpcHQgPSBhd2FpdCBzZW5kQmF0Y2hUcmFuc2FjdGlvbih7XG4gICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25zOiBjYWxscyxcbiAgICAgICAgfSk7XG4gICAgICAgIGhhc2hlcy5wdXNoKHJlY2VpcHQudHJhbnNhY3Rpb25IYXNoKTtcbiAgICAgICAgYnVuZGxlc1RvVHJhbnNhY3Rpb25zLnNldChpZCwgaGFzaGVzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgY2FsbHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY2VpcHQgPSBhd2FpdCBzZW5kQW5kQ29uZmlybVRyYW5zYWN0aW9uKHtcbiAgICAgICAgICAgICAgICBhY2NvdW50LFxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFzaGVzLnB1c2gocmVjZWlwdC50cmFuc2FjdGlvbkhhc2gpO1xuICAgICAgICAgICAgYnVuZGxlc1RvVHJhbnNhY3Rpb25zLnNldChpZCwgaGFzaGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaWQ7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5BcHBXYWxsZXRHZXRDYWxsc1N0YXR1cyhhcmdzKSB7XG4gICAgY29uc3QgeyBjaGFpbiwgY2xpZW50LCBpZCB9ID0gYXJncztcbiAgICBjb25zdCBidW5kbGUgPSBidW5kbGVzVG9UcmFuc2FjdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWJ1bmRsZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGNhbGxzIHN0YXR1cywgdW5rbm93biBidW5kbGUgaWRcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRScGNDbGllbnQoeyBjaGFpbiwgY2xpZW50IH0pO1xuICAgIGxldCBzdGF0dXMgPSBcInN1Y2Nlc3NcIjtcbiAgICBjb25zdCByZWNlaXB0cyA9IGF3YWl0IFByb21pc2UuYWxsKGJ1bmRsZS5tYXAoKGhhc2gpID0+IGV0aF9nZXRUcmFuc2FjdGlvblJlY2VpcHQocmVxdWVzdCwgeyBoYXNoIH0pXG4gICAgICAgIC50aGVuKChyZWNlaXB0KSA9PiAoe1xuICAgICAgICBibG9ja0hhc2g6IHJlY2VpcHQuYmxvY2tIYXNoLFxuICAgICAgICBibG9ja051bWJlcjogcmVjZWlwdC5ibG9ja051bWJlcixcbiAgICAgICAgZ2FzVXNlZDogcmVjZWlwdC5nYXNVc2VkLFxuICAgICAgICBsb2dzOiByZWNlaXB0LmxvZ3MubWFwKChsKSA9PiAoe1xuICAgICAgICAgICAgYWRkcmVzczogbC5hZGRyZXNzLFxuICAgICAgICAgICAgZGF0YTogbC5kYXRhLFxuICAgICAgICAgICAgdG9waWNzOiBsLnRvcGljcyxcbiAgICAgICAgfSkpLFxuICAgICAgICBzdGF0dXM6IHJlY2VpcHQuc3RhdHVzLFxuICAgICAgICB0cmFuc2FjdGlvbkhhc2g6IHJlY2VpcHQudHJhbnNhY3Rpb25IYXNoLFxuICAgIH0pKVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICBzdGF0dXMgPSBcInBlbmRpbmdcIjtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGlmIHRoZXJlJ3MgYW4gZXJyb3IgdG8gZmlsdGVyIG91dCBsYXRlclxuICAgIH0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXRvbWljOiBmYWxzZSxcbiAgICAgICAgY2hhaW5JZDogY2hhaW4uaWQsXG4gICAgICAgIGlkLFxuICAgICAgICByZWNlaXB0czogcmVjZWlwdHMuZmlsdGVyKChyKSA9PiByICE9PSBudWxsKSxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBzdGF0dXNDb2RlOiAyMDAsXG4gICAgICAgIHZlcnNpb246IFwiMi4wLjBcIixcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW4tYXBwLXdhbGxldC1jYWxscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/thirdweb/dist/esm/wallets/in-app/core/eip5792/in-app-wallet-calls.js\n"));

/***/ })

}]);